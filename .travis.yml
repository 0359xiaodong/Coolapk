language: android
jdk: oraclejdk7
env:
  matrix:
  - ANDROID_TARGET=android-19  ANDROID_ABI=armeabi-v7a
android:
  components:
  - build-tools-19.0.0
before_script:
- echo no | android create avd --force -n test -t $ANDROID_TARGET --abi $ANDROID_ABI
- emulator -avd test -no-skin -no-audio -no-window &
- adb wait-for-device
- adb shell input keyevent 82 &
- chmod +x gradlew
script: ./gradlew build
deploy:
  provider: releases
  api_key:
    secure: erkFo+DN77BUXT4+2irsR0nRgQxrsJIbnGDe8ozSofb0r4dB/nkAfSPK42ZuxzqGZlWpPlK+Y80deMLxEWtep/p01l7BHpeV/clgvYkCrF8XLjBkKF73NlM+ZXB3hnEFw76cxKYENZs/BtD9sgbKbfWaSKuAZAUpZb2M/+uisJQ=
  file: app/build/apk/app-release-unsigned.apk
  on:
    repo: bjzhou/Coolapk
